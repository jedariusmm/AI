<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>NUPI AI - API Configuration</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        h1 {
            font-size: 2.5rem;
            text-align: center;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }
        .config-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #06b6d4;
            font-weight: 600;
        }
        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #8b5cf6;
        }
        button {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1rem;
        }
        button:hover {
            transform: scale(1.02);
        }
        .status {
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            display: none;
        }
        .status.success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
            color: #4ade80;
        }
        .status.error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #f87171;
        }
        .info-box {
            background: rgba(139, 92, 246, 0.1);
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #8b5cf6;
            margin: 1rem 0;
        }
        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Monaco', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê API Configuration</h1>
        
        <div class="info-box">
            <strong>üìå Current Status:</strong> Using demo mode (canned responses)<br>
            <strong>üîë To enable real AI:</strong> Add your API key below
        </div>

        <div class="config-section">
            <h3>API Provider</h3>
            <label>Select Provider:</label>
            <select id="apiProvider" onchange="updateProvider()">
                <option value="demo">Demo Mode (No API Key)</option>
                <option value="anthropic">Anthropic (Claude)</option>
                <option value="openai">OpenAI (GPT)</option>
                <option value="custom">Custom Endpoint</option>
            </select>
        </div>

        <div class="config-section" id="apiKeySection" style="display: none;">
            <h3>API Configuration</h3>
            
            <label>API Key:</label>
            <input type="password" id="apiKey" placeholder="sk-ant-...">
            
            <label>Model:</label>
            <select id="model">
                <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet (Latest)</option>
                <option value="claude-3-opus-20240229">Claude 3 Opus</option>
                <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
                <option value="gpt-4-turbo">GPT-4 Turbo</option>
                <option value="gpt-4">GPT-4</option>
                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
            </select>

            <div id="customEndpoint" style="display: none;">
                <label>API Endpoint:</label>
                <input type="text" id="endpoint" placeholder="https://api.example.com/v1/chat">
            </div>
        </div>

        <div class="config-section">
            <h3>Advanced Settings</h3>
            
            <label>Temperature (0-1):</label>
            <input type="number" id="temperature" min="0" max="1" step="0.1" value="0.7">
            
            <label>Max Tokens:</label>
            <input type="number" id="maxTokens" min="100" max="4096" value="2048">
            
            <label>System Prompt:</label>
            <textarea id="systemPrompt" rows="4" placeholder="You are a helpful AI assistant...">You are NUPI AI, a helpful and friendly AI assistant powered by Claude. You provide clear, accurate, and engaging responses.</textarea>
        </div>

        <button onclick="saveConfig()">üíæ Save Configuration</button>
        <button onclick="testConnection()" style="background: rgba(6, 182, 212, 0.8);">üîç Test Connection</button>

        <div class="status" id="status"></div>

        <div class="config-section" style="margin-top: 2rem;">
            <h3>üìñ How to Get API Keys</h3>
            
            <p><strong>Anthropic (Claude):</strong></p>
            <ol>
                <li>Go to <code>console.anthropic.com</code></li>
                <li>Sign up or log in</li>
                <li>Navigate to API Keys</li>
                <li>Create a new key (starts with <code>sk-ant-</code>)</li>
            </ol>

            <p><strong>OpenAI (GPT):</strong></p>
            <ol>
                <li>Go to <code>platform.openai.com</code></li>
                <li>Sign up or log in</li>
                <li>Navigate to API Keys</li>
                <li>Create a new secret key (starts with <code>sk-</code>)</li>
            </ol>
        </div>
    </div>

    <script>
        // Load saved configuration
        window.onload = function() {
            const config = JSON.parse(localStorage.getItem('nupiAIConfig') || '{}');
            
            if (config.provider) {
                document.getElementById('apiProvider').value = config.provider;
                updateProvider();
            }
            if (config.apiKey) document.getElementById('apiKey').value = config.apiKey;
            if (config.model) document.getElementById('model').value = config.model;
            if (config.temperature) document.getElementById('temperature').value = config.temperature;
            if (config.maxTokens) document.getElementById('maxTokens').value = config.maxTokens;
            if (config.systemPrompt) document.getElementById('systemPrompt').value = config.systemPrompt;
            if (config.endpoint) document.getElementById('endpoint').value = config.endpoint;
        };

        function updateProvider() {
            const provider = document.getElementById('apiProvider').value;
            const apiKeySection = document.getElementById('apiKeySection');
            const customEndpoint = document.getElementById('customEndpoint');
            const modelSelect = document.getElementById('model');
            
            if (provider === 'demo') {
                apiKeySection.style.display = 'none';
            } else {
                apiKeySection.style.display = 'block';
            }
            
            if (provider === 'custom') {
                customEndpoint.style.display = 'block';
            } else {
                customEndpoint.style.display = 'none';
            }

            // Update model options based on provider
            if (provider === 'anthropic') {
                modelSelect.innerHTML = `
                    <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet (Latest)</option>
                    <option value="claude-3-opus-20240229">Claude 3 Opus</option>
                    <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
                `;
            } else if (provider === 'openai') {
                modelSelect.innerHTML = `
                    <option value="gpt-4-turbo">GPT-4 Turbo</option>
                    <option value="gpt-4">GPT-4</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                `;
            }
        }

        function saveConfig() {
            const config = {
                provider: document.getElementById('apiProvider').value,
                apiKey: document.getElementById('apiKey').value,
                model: document.getElementById('model').value,
                temperature: parseFloat(document.getElementById('temperature').value),
                maxTokens: parseInt(document.getElementById('maxTokens').value),
                systemPrompt: document.getElementById('systemPrompt').value,
                endpoint: document.getElementById('endpoint').value
            };

            localStorage.setItem('nupiAIConfig', JSON.stringify(config));
            
            showStatus('success', '‚úÖ Configuration saved successfully!');
            
            // Redirect to app after 2 seconds
            setTimeout(() => {
                window.location.href = 'nupi-ai-mobile.html';
            }, 2000);
        }

        async function testConnection() {
            const provider = document.getElementById('apiProvider').value;
            
            if (provider === 'demo') {
                showStatus('success', '‚úÖ Demo mode is working! No API key needed.');
                return;
            }

            const apiKey = document.getElementById('apiKey').value;
            
            if (!apiKey) {
                showStatus('error', '‚ùå Please enter an API key first');
                return;
            }

            showStatus('success', 'üîÑ Testing connection...');

            try {
                let response;
                
                if (provider === 'anthropic') {
                    response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': apiKey,
                            'anthropic-version': '2023-06-01'
                        },
                        body: JSON.stringify({
                            model: document.getElementById('model').value,
                            max_tokens: 100,
                            messages: [{ role: 'user', content: 'test' }]
                        })
                    });
                } else if (provider === 'openai') {
                    response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: document.getElementById('model').value,
                            messages: [{ role: 'user', content: 'test' }],
                            max_tokens: 100
                        })
                    });
                }

                if (response.ok) {
                    showStatus('success', '‚úÖ Connection successful! API is working.');
                } else {
                    const error = await response.json();
                    showStatus('error', `‚ùå Error: ${error.error?.message || 'Invalid API key'}`);
                }
            } catch (error) {
                showStatus('error', `‚ùå Connection failed: ${error.message}`);
            }
        }

        function showStatus(type, message) {
            const status = document.getElementById('status');
            status.className = `status ${type}`;
            status.textContent = message;
            status.style.display = 'block';
        }
    </script>
</body>
</html>
